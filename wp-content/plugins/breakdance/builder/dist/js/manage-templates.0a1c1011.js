(function(t){function e(e){for(var n,i,l=e[0],o=e[1],c=e[2],p=0,d=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,l=1;l<a.length;l++){var o=a[l];0!==s[o]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={"manage-templates":0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;r.push([2,"chunk-vendors","chunk-common"]),a()})({"0999":function(t,e,a){},"1f6f":function(t,e,a){"use strict";var n=a("3c93"),s=a.n(n);s.a},2:function(t,e,a){t.exports=a("32e4")},"2a1c":function(t,e,a){"use strict";var n=a("2b44"),s=a.n(n);s.a},"2b44":function(t,e,a){},"32e4":function(t,e,a){"use strict";a.r(e);a("d3b7"),a("ac1f"),a("3ca3"),a("841c"),a("ddb0"),a("2b3d"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=a("b850"),r=a("0670"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"breakdance-admin-wp"},[a("Notifications"),a("div",{staticClass:"manage-templates-app"},[t.isBlockPostType?[a("ManageGlobalBlocks")]:[a("ManageTemplates",{attrs:{postType:t.postType}})]],2)],1)},l=[],o=a("d4ec"),c=a("bee2"),u=a("2caf"),p=a("262e"),d=a("9ab4"),m=(a("1961"),a("60a3")),h=a("050e"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoadingData?a("Loading"):t._e(),a("div",{staticClass:"manage-templates"},[a("div",{staticClass:"manage-templates__header"},[a("h1",{staticClass:"manage-templates__title"},[t._v(" "+t._s(t.showTrash?"Deleted "+t.templateName+"s":t.templateName+"s")+" ")]),t.showTrash?t._e():["breakdance_header"===t.postType||"breakdance_footer"===t.postType||"breakdance_popup"===t.postType?a("v-btn",{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(e){t.modalData={type:"add",data:t.blankTemplateWithValidSettings}}}},["breakdance_header"===t.postType?a("span",[t._v("Add Header")]):t._e(),"breakdance_footer"===t.postType?a("span",[t._v("Add Footer")]):t._e(),"breakdance_popup"===t.postType?a("span",[t._v("Add Popup")]):t._e()]):t._e(),"breakdance_template"===t.postType?a("AddTemplateDropdown",{attrs:{templateName:t.templateName,isWooCommerceActive:t.isWooCommerceActive,templates:t.templatesByStatus},on:{input:t.saveTemplate,blankModal:function(e){return t.handleTemplateCardModal("add",t.blankTemplateWithValidSettings)},modalWithSettings:function(e){return t.handleTemplateCardModal("add",e)}}}):t._e()]],2),this.templatesByStatus.length>0||this.filteredTemplatesBySearch.length>0||t.trashLength>0||t.showTrash?a("div",{staticClass:"manage-templates__actions"},[t.showTrash?t._e():a("div",{staticClass:"manage-templates__search"},[a("SearchInput",{attrs:{placeholder:t.searchInputPlaceholder},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"manage-templates__secondary-actions"},[t.showTrash&&this.templatesByStatus.length?a("v-btn",{staticClass:"mr-4",attrs:{text:"",loading:t.emptyingTrash},on:{click:t.emptyTrash}},[a("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Empty Trash ")],1):t._e(),t.trashLength||t.showTrash?a("v-btn",{attrs:{text:""},on:{click:function(e){t.showTrash=!t.showTrash}}},[t.showTrash?[a("Icon",{staticClass:"mr-2",attrs:{icon:"ArrowLeftLongIcon",size:"16"}}),t._v(" Back ")]:[a("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Trash ("+t._s(t.trashLength)+") ")]],2):t._e()],1)]):t._e()]),a("EmptyState",{attrs:{value:t.emptyStateData}}),t.filteredTemplatesBySearch.length>0?a("v-simple-table",{staticClass:"manage-templates__table breakdance-table",class:t.newTemplateAdded?"added":""},[a("thead",[a("tr",[a("th",{attrs:{width:"35%"}},[t._v(" Template ")]),a("th",{attrs:{width:"20%"}},[t._v(" Applies to ")]),a("th",{attrs:{width:"15%"}},[t._v(" Conditions ")]),"breakdance_popup"===t.postType?a("th",{attrs:{width:"18%"}},[t._v(" Triggers ")]):t._e(),"breakdance_popup"!==t.postType?a("th",{attrs:{width:"12%"}},[t._v(" Priority ")]):t._e()])]),a("transition-group",{attrs:{tag:"tbody",name:"fade",mode:"in-out"}},t._l(t.filteredTemplatesBySearch,(function(e){return a("TemplateRow",{key:e.id,class:t.newTemplateAdded?"":"animation-disabled",attrs:{value:t.getTemplateWithValidSettings(e),templateTypeCategories:t.templatesManagementData.templateTypeCategories,templateParents:t.templateParentsWithoutTrashed},on:{input:t.handleTemplateCardModal,trash:t.trashTemplate,delete:t.deleteTemplate,restore:t.restoreTemplate}})})),1)],1):t._e(),t.modalData?a("EditTemplateModal",{attrs:{value:t.modalData.data,templatesManagementData:t.templatesManagementData,postType:t.postType,templateParents:t.templateParentsWithoutTrashed,templates:t.templatesByStatus,mode:t.modalData.type,skipWarning:t.skipWarning,hasPermissionToManageFallbacks:t.hasPermissionToManageFallbacks},on:{input:function(e){return t.saveTemplate(e)},close:function(e){t.modalData=!1},skipWarning:function(e){t.skipWarning=e}}}):t._e()],1)},g=[],b=(a("4de4"),a("caad"),a("d81d"),a("2532"),a("5530")),f=(a("96cf"),a("1da1")),y=a("3af4"),k=a("c144"),_=a("2ba9"),T=a("8fe2"),O=a("a995"),j=T["j"]([T["s"]({slug:T["r"],label:T["r"]}),T["o"]({defaultPriority:T["n"]})]),w=(T["g"](T["s"]({text:T["r"],value:T["n"]})),T["g"](T["s"]({label:T["r"],types:T["g"](j)}))),C=T["o"]({parentId:T["n"],type:T["r"],ruleGroups:T["g"](k["d"]),triggers:k["e"],priority:T["n"],fallback:T["h"],onlyShowOnce:T["h"],avoidMultiple:T["h"],limitPageLoad:T["u"]([T["n"],T["m"]]),limitSession:T["u"]([T["n"],T["m"]]),limitForever:T["u"]([T["n"],T["m"]])}),x=T["u"]([T["l"]("breakdance_template"),T["l"]("breakdance_popup"),T["l"]("breakdance_header"),T["l"]("breakdance_footer"),T["l"]("breakdance_block"),T["l"]("breakdance_acf_block")]),B=T["s"]({id:T["n"],title:T["r"],editInBreakdanceLink:T["r"],postType:x,status:T["u"]([T["l"]("publish"),T["l"]("trash"),T["t"]])}),S=T["j"]([B,T["s"]({settings:T["u"]([C,T["m"]])})]),I=T["j"]([B,T["s"]({settings:C})]),P=T["s"]({text:T["r"],value:T["r"],proOnly:T["u"]([T["t"],T["h"]])}),V=T["s"]({conditions:T["g"](k["b"]),dynamicFields:T["g"](_["c"]),templateTypeCategories:w,popupTriggers:T["u"]([T["m"],T["g"](P)])}),D=T["s"]({templates:T["g"](S),templatesManagementData:V,isWooCommerceActive:T["h"],environment:O["a"]}),L=a("fb60"),A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("div",{staticClass:"manage-templates__title-row"},["trash"===t.mode?a("span",{staticClass:"manage-templates__title-link"},[t._v(" "+t._s(t.value.title)+" "),a("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])]):a("a",{staticClass:"manage-templates__title-link",attrs:{target:"_top",href:t.value.editInBreakdanceLink}},[t._v(" "+t._s(t.value.title)+" "),a("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])])]),a("div",{staticClass:"manage-templates__row-actions"},["publish"===t.mode?a("a",{staticClass:"manage-templates__btn-action",attrs:{href:t.value.editInBreakdanceLink,target:"_top",title:"Edit in Breakdance"}},[t._v(" Edit in Breakdance ")]):t._e(),"publish"===t.mode?a("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Settings"},on:{click:t.openEditTemplateModal}},[t._v(" Settings ")]):t._e(),"trash"===t.mode?a("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Restore"},on:{click:t.restoreTemplate}},[t._v(" Restore ")]):t._e(),a("button",{staticClass:"manage-templates__btn-action is-danger",attrs:{title:"publish"===t.mode?"Trash":"Delete permanently"},on:{click:t.deleteTemplate}},[t._v(" "+t._s("publish"===t.mode?"Trash":"Delete permanently")+" ")])])]),a("td",{staticClass:"manage-template__applies-to"},[t.matchingQuickAddTemplate?[a("span",{staticClass:"d-block"},[t._v(t._s(t.matchingQuickAddTemplate.name))]),a("ElementBadge",{staticClass:"template-row-element-badge",attrs:{value:{backgroundColor:t.matchingQuickAddTemplate.backgroundColor,textColor:t.matchingQuickAddTemplate.textColor,label:t.matchingQuickAddTemplate.category}}})]:t.appliesToLabel?[t._v(t._s(t.appliesToLabel))]:t._e()],2),a("td",[t.value.settings.ruleGroups&&t.value.settings.ruleGroups.length?[a("ConditionsPreviewTooltip",{attrs:{value:t.value.settings.ruleGroups}})]:t._e()],2),"breakdance_popup"===t.value.postType?a("td",{staticClass:"manage-template__td_text"},[t._v(" "+t._s(t.triggerLabels(t.value.settings.triggers))+" ")]):t._e(),"breakdance_popup"!==t.value.postType?a("td",{staticClass:"manage-template__td_text"},[void 0!==t.value.settings.priority?[t._v(" "+t._s(t.value.settings.priority)+" ")]:t._e()],2):t._e()])},M=[],E=(a("7db0"),a("a15b"),a("45fc"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[[a("v-tooltip",{staticClass:"condition-preview-tooltip-element",attrs:{bottom:"",transition:"0"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("span",t._g(t._b({},"span",s,!1),n),[a("Icon",{attrs:{icon:"CodeBranchIcon",size:"18"}})],1)]}}])},[a("span",[a("div",{staticClass:"condition-preview-tooltip-contanier"},[t._l(t.value,(function(e,n){return[a("div",{staticClass:"condition-preview-tooltip"},[n>0?a("span",{staticClass:"condition-preview-or-separator"},[a("span",[t._v("OR")])]):t._e(),t._l(e,(function(t,e){return a("ConditionPreviewRule",{key:e,attrs:{rule:t,index:e}})}))],2)]}))],2)])])]],2)}),R=[],N=a("bedf"),F=a("18a4"),G=a("25c8"),W=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"edit",value:function(t){this.$emit("input",Object(N["a"])(t))}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],W.prototype,"value",void 0),W=Object(d["a"])([Object(m["a"])({components:{ConditionPreviewRule:F["a"],Icon:G["a"]}})],W);var $=W,U=$,q=(a("80e6"),a("2877")),z=a("6544"),H=a.n(z),K=a("3a2f"),Q=Object(q["a"])(U,E,R,!1,null,null,null),Z=Q.exports;H()(Q,{VTooltip:K["a"]});a("99af");var J=a("368e"),Y=a("ed31"),X=a("a4e3"),tt=a("a72c");function et(t){return at.apply(this,arguments)}function at(){return at=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(J["a"])({action:"breakdance_manage_templates_save",dataToPost:{id:e.id,title:e.title,postType:e.postType,settings:Object(tt["a"])(e.settings)},decoder:I,resultKey:"data",friendlyName:"Save template"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),at.apply(this,arguments)}function nt(t){return st.apply(this,arguments)}function st(){return st=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(J["a"])({action:"breakdance_manage_templates_load_data",dataToPost:{post_type:e},decoder:D,resultKey:"data",friendlyName:"Get templates data"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),st.apply(this,arguments)}function rt(){return it.apply(this,arguments)}function it(){return it=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(J["a"])({action:"breakdance_manage_global_blocks",decoder:Y["b"],resultKey:"data",friendlyName:"Get global blocks data"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),it.apply(this,arguments)}function lt(t,e,a){return ot.apply(this,arguments)}function ot(){return ot=Object(f["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(confirm("".concat("publish"===n?"Moving to trash":"Permanently deleting",' "').concat(e,'". Are you sure?'))){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.t0=y["pipe"],t.next=5,Object(J["a"])({action:"breakdance_manage_templates_delete",dataToPost:{id:a,trashOrDelete:"trash"===n?"delete":"trash"},decoder:T["l"]("success"),resultKey:"data",friendlyName:'Deleting "'.concat(e,'"')});case 5:return t.t1=t.sent,t.t2=Object(L["fold"])((function(){X["a"].log.message('Failed to delete "'.concat(e,'"'))}),(function(){return a})),t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 8:case"end":return t.stop()}}),t)}))),ot.apply(this,arguments)}function ct(t,e){return ut.apply(this,arguments)}function ut(){return ut=Object(f["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(confirm('Restoring "'.concat(e,'". Are you sure?'))){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.t0=y["pipe"],t.next=5,Object(J["a"])({action:"breakdance_manage_templates_restore",dataToPost:{id:a},decoder:T["l"]("success"),resultKey:"data",friendlyName:"Restoring ".concat(e)});case 5:return t.t1=t.sent,t.t2=Object(L["fold"])((function(){X["a"].log.message('Failed to restore "'.concat(e,'"'))}),(function(){return a})),t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 8:case"end":return t.stop()}}),t)}))),ut.apply(this,arguments)}function pt(t){return dt.apply(this,arguments)}function dt(){return dt=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(confirm("Delete all trash permanently?")){t.next=2;break}return t.abrupt("return",!1);case 2:return t.t0=y["pipe"],t.next=5,Object(J["a"])({action:"breakdance_manage_templates_empty_trash",dataToPost:{postType:e},decoder:T["l"]("success"),resultKey:"data",friendlyName:"Emptying trash for ".concat(e)});case 5:return t.t1=t.sent,t.t2=Object(L["fold"])((function(){return!1}),(function(){return!0})),t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 8:case"end":return t.stop()}}),t)}))),dt.apply(this,arguments)}var mt=a("b4c8"),ht=a.n(mt),vt=[{name:"Single Product",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"product",ruleGroups:[],priority:20}},{name:"Shop Page & All Product Archives",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"all-product-archives",ruleGroups:[],priority:10}},{name:"Specific Product Archive",category:"Woo",textColor:"var(--brandWooCommerce)",backgroundColor:"var(--brandWooCommerceBackground)",settings:{type:"specific-product-archive",ruleGroups:[[{ruleSlug:"product-is-taxonomy",operand:"is",value:[]}]],priority:20},openDialog:!0},{name:"Single Post",category:"Blog",textColor:"var(--brandWordPress)",backgroundColor:"var(--brandWordPressBackground)",settings:{type:"post",ruleGroups:[],priority:20}},{name:"Post Archive",category:"Blog",textColor:"var(--brandWordPress)",backgroundColor:"var(--brandWordPressBackground)",settings:{type:"post-archives",ruleGroups:[],priority:10}},{name:"404 Not Found",category:"Other",textColor:ht.a.green800_light,backgroundColor:ht.a.green100_light,settings:{type:"404",ruleGroups:[]}},{name:"Search Results",textColor:ht.a.green800_light,backgroundColor:ht.a.green100_light,category:"Other",settings:{type:"search",ruleGroups:[]}}],gt=a("ea59"),bt=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.deleteInProgress=!1,t.restoreInProgress=!1,t}return Object(c["a"])(a,[{key:"openEditTemplateModal",value:function(){"trash"!==this.mode&&this.$emit("input","edit",this.value)}},{key:"deleteTemplate",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.deleteInProgress=!0,t.next=3,lt(this.value.title,this.value.id,this.value.status);case 3:e=t.sent,e&&this.$emit("publish"===this.value.status?"trash":"delete",e),this.deleteInProgress=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"restoreTemplate",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.restoreInProgress=!0,t.next=3,ct(this.value.title,this.value.id);case 3:e=t.sent,e&&this.$emit("restore",e),this.restoreInProgress=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"triggerLabels",value:function(t){return t.map((function(t){return t.slug})).join(", ")}},{key:"mode",get:function(){return this.value.status}},{key:"appliesToLabel",get:function(){var t=this.value.settings.type,e="";return this.templateTypeCategories.some((function(a){var n=a.types.find((function(e){return e.slug===t}));return!!n&&(e=n.label,!0)})),e}},{key:"parentLabel",get:function(){var t,e=this;return!!this.value.settings.parentId&&(null===(t=this.templateParents.find((function(t){return t.value===e.value.settings.parentId})))||void 0===t?void 0:t.text)}},{key:"matchingQuickAddTemplate",get:function(){var t=this;return vt.find((function(e){return e.settings.type===t.value.settings.type}))}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],bt.prototype,"value",void 0),Object(d["a"])([Object(m["d"])()],bt.prototype,"templateTypeCategories",void 0),Object(d["a"])([Object(m["d"])()],bt.prototype,"templateParents",void 0),bt=Object(d["a"])([Object(m["a"])({components:{Icon:G["a"],ConditionsPreviewTooltip:Z,ElementBadge:gt["a"]}})],bt);var ft=bt,yt=ft,kt=(a("5af9"),Object(q["a"])(yt,A,M,!1,null,null,null)),_t=kt.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Dropdown",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:"",loading:t.quickAddInProgress}},n),[t._v(" Add Template ")])]}}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[a("v-card",[a("v-list",{attrs:{dense:"",width:"350"}},[t._l(t.quickAddTemplates,(function(e){return a("v-list-item",{key:e.name,on:{click:function(a){return t.quickAdd(e)}}},[a("v-list-item-title",{staticClass:"quick-add-item"},[t._v(" "+t._s(e.name)+" "),a("ElementBadge",{attrs:{value:{backgroundColor:e.backgroundColor,textColor:e.textColor,label:e.category}}})],1)],1)})),a("v-list-item",{staticClass:"add-custom-template-wrapper"},[a("v-list-item-title",{staticClass:"add-custom-template-wrapper-title"},[a("v-btn",{staticClass:"breakdance-wp-admin-templating-button",attrs:{outlined:""},on:{click:function(e){return t.$emit("blankModal")}}},[t._v("Add Custom Template")])],1)],1)],2)],1)],1)],1)},Ot=[],jt=(a("b0c0"),a("a17c")),wt=(a("c740"),a("a434"),a("63ea")),Ct=a.n(wt);function xt(t,e){var a=e.findIndex((function(e){return e.id===t.id})),n=Object(N["a"])(e);return-1!==a?n[a]=Object(N["a"])(t):n.unshift(Object(N["a"])(t)),n}function Bt(t,e){var a=e.findIndex((function(e){return"id"in e&&e.id===t})),n=Object(N["a"])(e);return-1!==a&&n.splice(a,1),n}function St(t,e,a){var n=e.findIndex((function(e){return"id"in e&&e.id===t})),s=Object(N["a"])(e);return-1!==n&&(s[n].status=a),s}function It(t){return Object(N["a"])(t).filter((function(t){return"trash"!==t.status}))}function Pt(t,e,a){var n=t.find((function(t){return Ct()(t.settings,e)}));return!n||confirm("You already have a ".concat(a,' with this settings called "').concat(n.title,'". Continue anyway?'))}var Vt=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.open=!1,t.quickAddInProgress=!1,t}return Object(c["a"])(a,[{key:"quickAdd",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){var a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a={id:-1,title:e.name,editInBreakdanceLink:"",postType:"breakdance_template",settings:e.settings,status:"publish"},Pt(this.templates,e.settings,"template")){t.next=3;break}return t.abrupt("return");case 3:if(!e.openDialog){t.next=6;break}return this.$emit("modalWithSettings",a),t.abrupt("return");case 6:return this.quickAddInProgress=!0,t.t0=y["pipe"],t.next=10,et(a);case 10:t.t1=t.sent,t.t2=Object(L["fold"])((function(){X["a"].log.message("The new ".concat(n.templateName," couldn't be saved"))}),(function(t){n.$emit("input",t)})),(0,t.t0)(t.t1,t.t2),this.quickAddInProgress=!1;case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"quickAddTemplates",get:function(){return this.isWooCommerceActive?vt:vt.filter((function(t){return"woocommerce"!==t.category.toLowerCase()}))}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],Vt.prototype,"templateName",void 0),Object(d["a"])([Object(m["d"])()],Vt.prototype,"isWooCommerceActive",void 0),Object(d["a"])([Object(m["d"])()],Vt.prototype,"templates",void 0),Vt=Object(d["a"])([Object(m["a"])({components:{Dropdown:jt["a"],ElementBadge:gt["a"]}})],Vt);var Dt=Vt,Lt=Dt,At=(a("acf2"),a("8336")),Mt=a("b0af"),Et=a("8860"),Rt=a("da13"),Nt=a("5d23"),Ft=Object(q["a"])(Lt,Tt,Ot,!1,null,null,null),Gt=Ft.exports;H()(Ft,{VBtn:At["a"],VCard:Mt["a"],VList:Et["a"],VListItem:Rt["a"],VListItemTitle:Nt["c"]});var Wt=a("f57e"),$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:!0,"max-width":"750",persistent:t.hasUnsavedChanges,scrollable:!0,transition:!1},on:{input:t.closeDialog}},[t.skipWarning?[a("v-card",{staticClass:"template-settings-modal-content",attrs:{width:"750",tile:"",flat:""}},[a("v-card-title",{staticClass:"edit-template-modal-titlebar"},[a("h1",[t._v(" "+t._s("add"===t.mode?"Add "+t.templateName:'Editing "'+t.internalValue.title+'"')+" ")]),a("v-spacer")],1),a("v-card-text",[a("div",{staticClass:"mt-4 d-flex flex-column"},[a("FreeModeAlertForConditionsUsed",{attrs:{value:t.internalValue.settings.ruleGroups,"available-conditions":t.availableConditions}}),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("TextInput",{staticClass:"template-modal-not-so-wide",attrs:{value:t.internalValue.title,placeholder:"New "+t.templateName,size:"md",label:"Title"},on:{input:t.setTemplateTitle}}),t.titleError?a("div",{staticClass:"bde-templates_field-error"},[t._v(" "+t._s(t.titleError)+" ")]):t._e()],1),a("v-col",{attrs:{cols:"12"}},[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Location")]),a("DropdownInput",{staticClass:"breakdance-dense-select--md template-modal-not-so-wide",attrs:{placeholder:"Apply "+t.templateName+" to...",items:t.templateTypesDropdownInVuetifyShape,value:t.internalValue.settings.type},on:{input:t.setTemplateType},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.item;return[a("div",{staticClass:"v-select__selection v-select__selection--comma"},[t._v(" "+t._s(n.category)+" / "+t._s(n.text)+" ")])]}}],null,!1,1945710855)}),t.locationError?a("div",{staticClass:"bde-templates_field-error"},[t._v(" "+t._s(t.locationError)+" ")]):t._e()],1)],1),a("label",{staticClass:"mt-6 breakdance-text-input__label"},[t._v("Conditions")]),a("ConditionsMatrix",{attrs:{value:t.internalValue.settings.ruleGroups||[],availableConditions:t.availableConditions,templateType:t.internalValue.settings.type},on:{input:function(e){return t.updateRuleGroups(e)}}})],1),"breakdance_popup"===t.postType?a("div",[a("label",{staticClass:"mt-6 breakdance-text-input__label"},[t._v("Popup Opens When")]),a("TriggersMatrix",{attrs:{value:t.internalValue.settings.triggers||[],triggers:t.templatesManagementData.popupTriggers,"disable-trigger-limits":t.internalValue.settings.onlyShowOnce},on:{input:function(e){return t.updateTriggers(e)}}}),a("FreeModeAlertForPopupTriggers",{attrs:{value:t.internalValue.settings.triggers||[],triggers:t.templatesManagementData.popupTriggers}}),a("label",{staticClass:"d-flex mt-6 breakdance-text-input__label"},[t._v("Limit how often this popup shows")]),a("ToggleInput",{attrs:{value:t.hasOnlyShow},on:{input:t.toggleOnlyShow}}),t.hasOnlyShow?a("div",{staticClass:"d-flex"},[a("div",{staticClass:"flex-grow-1 template-rule-input-row"},[a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Per Page Load")]),a("NumberInput",{attrs:{value:t.internalValue.settings.limitPageLoad},on:{input:t.setLimitPageLoad}})],1),a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Per Session")]),a("NumberInput",{attrs:{value:t.internalValue.settings.limitSession},on:{input:t.setLimitSession}})],1),a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Forever")]),a("NumberInput",{attrs:{value:t.internalValue.settings.limitForever},on:{input:t.setLimitForever}})],1)])]):t._e(),a("label",{staticClass:"d-flex mt-3 breakdance-text-input__label"},[t._v("Do not show this popup if any other popup has already shown")]),a("ToggleInput",{attrs:{value:t.internalValue.settings.avoidMultiple},on:{input:t.setAvoidMultiple}})],1):t._e(),"breakdance_popup"!==t.postType?a("v-row",{staticClass:"mb-3"},[a("v-col",{attrs:{cols:"12"}},[a("label",{staticClass:"breakdance-text-input__label mt-6",staticStyle:{"text-transform":"capitalize"}},[t._v(" Priority ")]),a("NumberInput",{staticClass:"breakdance-simple-number-input--md template-priority-input",attrs:{value:t.internalValue.settings.priority},on:{input:t.setTemplatePriority}}),t.priorityError?a("div",{staticClass:"bde-templates_field-error"},[t._v(" "+t._s(t.priorityError)+" ")]):t._e()],1),t.hasPermissionToManageFallbacks?a("v-col",{attrs:{cols:"12"}},[a("label",{staticClass:"breakdance-text-input__label",staticStyle:{"text-transform":"capitalize"}},[t._v(" Fallback ")]),a("v-switch",{attrs:{"input-value":t.internalValue.settings.fallback},on:{change:t.setFallback}})],1):t._e()],1):t._e()],1),a("v-card-actions",{staticClass:"edit-template-modal-actions"},[a("v-row",[a("v-col",{staticClass:"text-left"},[t.hasUnsavedChanges?a("v-btn",{attrs:{text:""},on:{click:t.closeDialog}},[t._v(" Cancel ")]):t._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{color:"blue",dark:"",elevation:"0",loading:t.saveInProgress,disabled:t.isThereAnError},on:{click:t.saveTemplate}},["edit"===t.mode?[t._v("Save")]:[t._v("Add "+t._s(t.templateName))]],2)],1)],1)],1)],1)]:[a("v-card",{staticClass:"breakdance-dialog",attrs:{width:"400",tile:"",flat:""}},["add"===t.mode?[a("v-card-title",{staticClass:"breakdance-dialog-title"},[t._v(" Add Custom Template ")]),a("v-card-text",{staticClass:"breakdance-dialog-contents"},[t._v(" Please read the documentation before creating custom templates. ")])]:t._e(),"edit"===t.mode?[a("v-card-title",{staticClass:"breakdance-dialog-title"},[t._v(" Advanced Template Settings ")]),a("v-card-text",{staticClass:"breakdance-dialog-contents"},[t._v(" Please read the documentation before making customizations to template settings. ")])]:t._e(),a("v-card-actions",{staticClass:"breakdance-dialog-actions"},[a("v-btn",{attrs:{text:""},on:{click:function(e){return t.$emit("close")}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{dark:"",color:"blue",medium:""},on:{click:t.acknowledgeWarning}},[t._v(" Continue ")])],1)],2)]],2)},Ut=[],qt=(a("5db7"),a("4160"),a("73d9"),a("b64b"),a("159b"),a("2909")),zt=a("33b1"),Ht=a("0594"),Kt=a("434b"),Qt=a("24fc"),Zt=a("ab3f"),Jt=a("2ef0"),Yt=a.n(Jt),Xt=a("d98f"),te=a("a324"),ee=a("2961"),ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trigger-matrix"},[t._l(t.value,(function(e,n){return a("div",{key:n,staticClass:"template-rule-group-wrapper"},[n>0?a("span",{staticClass:"template-rule-group-or"},[a("span",[t._v("OR")])]):t._e(),a("TriggerInput",{attrs:{value:e,triggers:t.triggers,"disable-limit":t.disableTriggerLimits},on:{input:function(e){return t.updateTrigger(e,n)},delete:function(e){return t.deleteTrigger(n)}}})],1)})),a("NiceButton",{staticClass:"breakdance-condition-matrix__add-condition",attrs:{outlined:"",text:"","data-test-id":"add-condition-button","left-icon":"PlusIcon"},on:{click:t.addTrigger}},[t._v(" Add Trigger ")])],2)},ne=[],se=a("2128"),re=a("6b69"),ie=a("a96c"),le=a("6833"),oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"template-rule-group-condition"},[a("div",{staticClass:"template-rule-input-row flex-grow-1"},[a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Trigger on")]),a("DropdownInput",{attrs:{placeholder:"Choose trigger...",items:t.availableTriggersForDropdown,value:t.value.slug},on:{input:t.setValue}})],1),"scroll"===t.value.slug?a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Scrolls to")]),a("DropdownInput",{attrs:{items:t.scrollTypeOptions,value:t.scrollTypeValue},on:{input:t.setScrollType}})],1):t._e(),"click"===t.value.slug?a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Click target")]),a("DropdownInput",{attrs:{items:t.clickTypeOptions,value:t.clickTypeValue},on:{input:t.setClickType}})],1):t._e(),t.hasDelayOption?a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v(t._s(t.delayLabel))]),a("NumberInput",{attrs:{value:t.delayValue},on:{input:t.setDelay}})],1):t._e(),t.hasPercentOption?a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Percent")]),a("NumberInput",{attrs:{value:t.value.options.percent},on:{input:t.setPercent}})],1):t._e(),t.hasSelectorOption?a("div",[a("label",{staticClass:"breakdance-text-input__label"},[t._v("Selector")]),a("TextInput",{attrs:{placeholder:"#elementId",value:t.value.options.selector},on:{input:t.setSelector}})],1):t._e()]),a("div",{staticClass:"d-flex"},[a("IconButton",{staticClass:"template-rule-group-delete mt-6",attrs:{icon:"TrashIcon",size:"16",small:!0},on:{click:function(e){return t.$emit("delete")}}})],1)])},ce=[],ue=a("c188"),pe=a("a1a9"),de=a("3b39"),me=a("b109"),he=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"setValue",value:function(t){var e=Object(N["a"])(this.value);e.slug=null!==t&&void 0!==t?t:void 0,this.update(e)}},{key:"setDelay",value:function(t){var e=Object(N["a"])(this.value);e.options=Object(b["a"])({},e.options,{},{delay:null!==t&&void 0!==t?t:void 0}),this.update(e)}},{key:"setPercent",value:function(t){var e=Object(N["a"])(this.value);e.options=Object(b["a"])({},e.options,{},{percent:null!==t&&void 0!==t?t:void 0}),this.update(e)}},{key:"setSelector",value:function(t){var e=Object(N["a"])(this.value);e.options=Object(b["a"])({},e.options,{},{selector:null!==t&&void 0!==t?t:void 0}),this.update(e)}},{key:"setScrollType",value:function(t){var e=Object(N["a"])(this.value);e.options=Object(b["a"])({},e.options,{},{scrollType:t}),this.update(e)}},{key:"setClickType",value:function(t){var e=Object(N["a"])(this.value);e.options=Object(b["a"])({},e.options,{},{clickType:t}),this.update(e)}},{key:"update",value:function(t){this.$emit("input",t)}},{key:"availableTriggersForDropdown",get:function(){return this.triggers.map((function(t){return{text:t.proOnly?Object(me["a"])(t.text):t.text,value:t.value}}))}},{key:"scrollTypeOptions",get:function(){return[{text:"Percent",value:"percent"},{text:"Selector",value:"selector"}]}},{key:"scrollTypeValue",get:function(){var t,e,a;return null!==(t=null===(e=this.value)||void 0===e||null===(a=e.options)||void 0===a?void 0:a.scrollType)&&void 0!==t?t:null}},{key:"clickTypeOptions",get:function(){return[{text:"Anywhere",value:"anywhere"},{text:"Selector",value:"selector"}]}},{key:"clickTypeValue",get:function(){var t,e,a;return null!==(t=null===(e=this.value)||void 0===e||null===(a=e.options)||void 0===a?void 0:a.clickType)&&void 0!==t?t:null}},{key:"delayValue",get:function(){var t,e,a;return null!==(t=null===(e=this.value)||void 0===e||null===(a=e.options)||void 0===a?void 0:a.delay)&&void 0!==t?t:null}},{key:"delayLabel",get:function(){return"inactivity"===this.value.slug?"Inactivity length (seconds)":"Show after (seconds)"}},{key:"hasPercentOption",get:function(){var t;return"scroll"===this.value.slug&&"percent"===(null===(t=this.value.options)||void 0===t?void 0:t.scrollType)}},{key:"hasDelayOption",get:function(){return"load"===this.value.slug||"inactivity"===this.value.slug}},{key:"hasSelectorOption",get:function(){var t,e;return"scroll"===this.value.slug&&"selector"===(null===(t=this.value.options)||void 0===t?void 0:t.scrollType)||"click"===this.value.slug&&"selector"===(null===(e=this.value.options)||void 0===e?void 0:e.clickType)}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],he.prototype,"value",void 0),Object(d["a"])([Object(m["d"])()],he.prototype,"triggers",void 0),Object(d["a"])([Object(m["d"])({default:!1})],he.prototype,"disableLimit",void 0),he=Object(d["a"])([Object(m["a"])({components:{NumberInput:Zt["a"],Icon:G["a"],CodeInput:pe["default"],DynamicDataFieldText:ue["a"],TextInput:Qt["a"],DropdownInput:Kt["a"],IconButton:de["a"]}})],he);var ve=he,ge=ve,be=Object(q["a"])(ge,oe,ce,!1,null,null,null),fe=be.exports,ye=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"addTrigger",value:function(){var t=Object(N["a"])(this.value);t.push({}),this.$emit("input",t)}},{key:"deleteTrigger",value:function(t){var e=Object(N["a"])(this.value);e.splice(t,1),this.$emit("input",e)}},{key:"updateTrigger",value:function(t,e){var a=Object(N["a"])(this.value);a[e]=t,this.$emit("input",a)}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],ye.prototype,"value",void 0),Object(d["a"])([Object(m["d"])()],ye.prototype,"triggers",void 0),Object(d["a"])([Object(m["d"])({default:!1})],ye.prototype,"disableTriggerLimits",void 0),ye=Object(d["a"])([Object(m["a"])({components:{TriggerInput:fe,NiceButton:le["a"],Icon:G["a"],DynamicDataFields:se["a"],DynamicDataDialog:re["a"],TemplateRuleGroupInput:ie["a"]}})],ye);var ke=ye,_e=ke,Te=Object(q["a"])(_e,ae,ne,!1,null,null,null),Oe=Te.exports,je=a("6eb3"),we=a("fa7d"),Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.areProTriggersUsed?a("ProOnlyAlertBox",{staticClass:"mb-5 mt-6",attrs:{options:{feature:"popups",content:"Get Breakdance Pro to get access to all popup triggers."}}}):t._e()},xe=[],Be=a("9671"),Se=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"areProTriggersUsed",get:function(){return Object(me["d"])(this.value,this.triggers)}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],Se.prototype,"value",void 0),Object(d["a"])([Object(m["d"])()],Se.prototype,"triggers",void 0),Se=Object(d["a"])([Object(m["a"])({components:{ProOnlyAlertBox:Be["a"]}})],Se);var Ie=Se,Pe=Ie,Ve=Object(q["a"])(Pe,Ce,xe,!1,null,null,null),De=Ve.exports,Le=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.internalValue=Object(N["a"])(t.value),t.editingAdvancedSettings=!1,t.saveInProgress=!1,t.attemptedToSave=!1,t.onlyShowOpen=!1,t}return Object(c["a"])(a,[{key:"acknowledgeWarning",value:function(){this.$emit("skipWarning",!0)}},{key:"beforeMount",value:function(){"breakdance_template"!==this.value.postType&&this.acknowledgeWarning()}},{key:"mounted",value:function(){var t=this;Object(te["a"])(),this.warnIfUnsavedFunction=Object(Xt["b"])((function(){return t.hasUnsavedChanges}))}},{key:"setTemplateTitle",value:function(t){this.internalValue=Object(b["a"])({},this.internalValue,{title:t||""})}},{key:"updateTemplateSettings",value:function(t){this.internalValue.settings=Object(N["a"])(t)}},{key:"saveTemplate",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.attemptedToSave=!0,!this.isThereAnError){t.next=3;break}return t.abrupt("return");case 3:if(e=Object(N["a"])(this.internalValue),e.settings.priority||(e.settings.priority=1),a=!Ct()(this.value.settings,e.settings),!a||Pt(this.templates,e.settings,this.templateName)){t.next=8;break}return t.abrupt("return");case 8:return this.saveInProgress=!0,e.settings.ruleGroups=e.settings.ruleGroups&&Object(Ht["f"])(e.settings.ruleGroups)||[],e.settings.triggers=e.settings.triggers&&e.settings.triggers.filter((function(t){return Object.keys(t).length>0}))||[],e.settings.type=e.settings.type||"none",e.title=e.title||"New ".concat(this.postType),t.t0=y["pipe"],t.next=16,et(e);case 16:t.t1=t.sent,t.t2=Object(L["fold"])((function(){X["a"].log.message("".concat(n.templateName," was not saved, or it was saved but the value is invalid"))}),(function(t){n.$emit("input",t)})),(0,t.t0)(t.t1,t.t2),this.saveInProgress=!1,this.closeDialog();case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setTemplateType",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.type=t,this.internalValue.settings&&e.type===this.internalValue.settings.type||(e.ruleGroups=[]),e.type&&(e.priority=this.getDefaultTemplatePriorityBasedOnType(e.type)),this.updateTemplateSettings(e)}},{key:"setTemplateParent",value:function(t){var e=Object(N["a"])(this.internalValue.settings);t?e.parentId=t:delete e.parentId,this.updateTemplateSettings(e)}},{key:"setTemplatePriority",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.priority=null!==t&&void 0!==t?t:void 0,this.updateTemplateSettings(e)}},{key:"getDefaultTemplatePriorityBasedOnType",value:function(t){var e;return null===(e=this.templatesManagementData.templateTypeCategories.flatMap((function(t){return t.types})).find((function(e){return e.slug===t})))||void 0===e?void 0:e.defaultPriority}},{key:"updateRuleGroups",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.ruleGroups=t,this.updateTemplateSettings(e)}},{key:"updateTriggers",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.triggers=t,this.updateTemplateSettings(e)}},{key:"closeDialog",value:function(){Object(Xt["a"])(this.warnIfUnsavedFunction),this.$emit("close")}},{key:"setFallback",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.fallback=t,this.updateTemplateSettings(e)}},{key:"setOnlyShowOnce",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.onlyShowOnce=t,this.updateTemplateSettings(e)}},{key:"setAvoidMultiple",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.avoidMultiple=t,this.updateTemplateSettings(e)}},{key:"toggleOnlyShow",value:function(t){t||(this.setLimitPageLoad(null),this.setLimitSession(null),this.setLimitForever(null)),this.onlyShowOpen=t}},{key:"setLimitPageLoad",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.limitPageLoad=t,this.updateTemplateSettings(e)}},{key:"setLimitSession",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.limitSession=t,this.updateTemplateSettings(e)}},{key:"setLimitForever",value:function(t){var e=Object(N["a"])(this.internalValue.settings);e.limitForever=t,this.updateTemplateSettings(e)}},{key:"templateName",get:function(){return"breakdance_template"===this.postType?"template":"breakdance_footer"===this.postType?"footer":"breakdance_header"===this.postType?"header":"breakdance_popup"===this.postType?"popup":"Unsupported template"}},{key:"templateTypesDropdownInVuetifyShape",get:function(){var t=[];return this.templatesManagementData.templateTypeCategories.forEach((function(e){t.push({header:e.label}),t.push.apply(t,Object(qt["a"])(e.types.map((function(t){return{category:e.label,text:t.label,value:t.slug}})))),t.push({divider:!0})})),t.pop(),t}},{key:"selectedLocationCategory",get:function(){var t=this;return this.templatesManagementData.templateTypeCategories.find((function(e){return e.types.find((function(e){return e.slug===t.internalValue.settings.type}))}))}},{key:"categoryLabelForSelectedLocation",get:function(){var t;return null===(t=this.selectedLocationCategory)||void 0===t?void 0:t.label}},{key:"labelForSelectedLocation",get:function(){var t,e,a=this;return(null===(t=this.selectedLocationCategory)||void 0===t||null===(e=t.types.find((function(t){return t.slug===a.internalValue.settings.type})))||void 0===e?void 0:e.label)||this.internalValue.settings.type}},{key:"labelForInheritingParent",get:function(){var t,e=this;return(null===(t=this.templateParents.find((function(t){return t.value===e.internalValue.settings.parentId})))||void 0===t?void 0:t.text)||"Parent with ID: ".concat(this.internalValue.settings.parentId)}},{key:"availableConditions",get:function(){var t=Object(Ht["c"])(this.templatesManagementData.conditions,this.internalValue.settings.type);return this.internalValue.settings.type?Object(Ht["b"])(t,[this.internalValue.settings.type]).filter((function(t){return t.supports.includes("templating")})):t.filter((function(t){return t.supports.includes("templating")}))}},{key:"templateParentsExcludingCurrentTemplate",get:function(){var t=this,e=this.templateParents.filter((function(e){return t.value.id!==e.value}));return this.inheritedTemplateNoLongerExists&&this.internalValue.settings.parentId&&e.unshift({text:"Selected template with ID: ".concat(this.internalValue.settings.parentId," no longer exists."),value:this.internalValue.settings.parentId}),e}},{key:"inheritedTemplateNoLongerExists",get:function(){var t=this;return!!this.internalValue.settings.parentId&&!this.templateParents.find((function(e){return e.value===t.internalValue.settings.parentId}))}},{key:"inheritanceUiEnabled",get:function(){return"breakdance_template"===this.postType}},{key:"locationError",get:function(){return!!this.attemptedToSave&&(!this.internalValue.settings.type&&"Location is required")}},{key:"titleError",get:function(){return!!this.attemptedToSave&&(!this.internalValue.title&&"Title is required")}},{key:"priorityError",get:function(){return!!this.attemptedToSave&&(void 0!==this.internalValue.settings.priority&&("breakdance_popup"!==this.postType&&(this.internalValue.settings.priority<1&&"The minimum priority is 1")))}},{key:"isThereAnError",get:function(){return!!(this.priorityError||this.titleError||this.locationError)}},{key:"hasUnsavedChanges",get:function(){return!Yt.a.isEqual(this.internalValue,this.value)}},{key:"hasOnlyShow",get:function(){return!0===this.onlyShowOpen||(this.internalValue.settings.limitForever||this.internalValue.settings.limitSession||this.internalValue.settings.limitPageLoad)}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],Le.prototype,"value",void 0),Object(d["a"])([Object(m["d"])()],Le.prototype,"postType",void 0),Object(d["a"])([Object(m["d"])()],Le.prototype,"mode",void 0),Object(d["a"])([Object(m["d"])()],Le.prototype,"templatesManagementData",void 0),Object(d["a"])([Object(m["d"])()],Le.prototype,"templateParents",void 0),Object(d["a"])([Object(m["d"])()],Le.prototype,"templates",void 0),Object(d["a"])([Object(m["d"])()],Le.prototype,"skipWarning",void 0),Object(d["a"])([Object(m["d"])()],Le.prototype,"hasPermissionToManageFallbacks",void 0),Le=Object(d["a"])([Object(m["a"])({components:{FreeModeAlertForConditionsUsed:we["a"],FreeModeAlertForPopupTriggers:De,ToggleInput:je["a"],TriggersMatrix:Oe,Icon:G["a"],NumberInput:Zt["a"],TextInput:Qt["a"],DropdownInput:Kt["a"],ConditionsMatrix:zt["a"],Dialog:ee["a"]}})],Le);var Ae=Le,Me=Ae,Ee=(a("1f6f"),a("99d9")),Re=a("62ad"),Ne=a("169a"),Fe=a("0fd9"),Ge=a("2fa4"),We=a("b73d"),$e=Object(q["a"])(Me,$t,Ut,!1,null,null,null),Ue=$e.exports;H()($e,{VBtn:At["a"],VCard:Mt["a"],VCardActions:Ee["a"],VCardText:Ee["b"],VCardTitle:Ee["c"],VCol:Re["a"],VDialog:Ne["a"],VRow:Fe["a"],VSpacer:Ge["a"],VSwitch:We["a"]});var qe=a("fbf1"),ze=a("e4b2"),He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 0===t.value.itemsByStatus||0===t.value.filteredItemsBySearch?a("div",{staticClass:"manage-templates__empty"},["Header"==t.value.templateName?a("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[a("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM3.125 34.375h93.75",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):t._e(),"Footer"==t.value.templateName?a("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[a("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM96.875 65.625H3.125",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):t._e(),"Template"==t.value.templateName||"Unsupported template"==t.value.templateName||"Global Block"==t.value.templateName?a("svg",{staticClass:"manage-templates__empty-state-icon",attrs:{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[a("path",{attrs:{d:"M92.708 3.125H7.292a4.167 4.167 0 0 0-4.167 4.167v85.416a4.167 4.167 0 0 0 4.167 4.167h85.416a4.167 4.167 0 0 0 4.167-4.167V7.292a4.167 4.167 0 0 0-4.167-4.167ZM50 3.125v93.75M50 34.375h46.875M96.875 65.625H50M50 50H3.125",stroke:"currentColor","stroke-width":"6.25","stroke-linecap":"round","stroke-linejoin":"round"}})]):0===t.value.itemsByStatus?a("div",[a("h4",[t._v(" You have no "+t._s(t.value.showTrash?"deleted":"published")+" "+t._s(t.value.templateName.toLowerCase())+"s. ")])]):0===t.value.filteredItemsBySearch?a("div",[a("h4",[t._v("No "+t._s(t.value.templateName.toLowerCase())+"s found.")])]):t._e()]):t._e()},Ke=[],Qe=a("b45a"),Ze=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"isBreakdanceDevelopmentEnvironment",get:function(){return Object(Qe["a"])()}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],Ze.prototype,"value",void 0),Ze=Object(d["a"])([Object(m["a"])({})],Ze);var Je=Ze,Ye=Je,Xe=Object(q["a"])(Ye,He,Ke,!1,null,null,null),ta=Xe.exports,ea=a("45a1"),aa=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.modalData=!1,t.skipWarning=!1,t.templates=[],t.templatesManagementData={conditions:[],dynamicFields:[],templateTypeCategories:[],popupTriggers:null},t.isWooCommerceActive=!1,t.search="",t.showTrash=!1,t.newTemplateAdded=!1,t.hasPermissionToManageFallbacks=!1,t.emptyingTrash=!1,t.isLoadingData=!1,t}return Object(c["a"])(a,[{key:"onTemplateAdded",value:function(){var t=this;setTimeout((function(){return t.newTemplateAdded=!1}),1e3)}},{key:"saveTemplate",value:function(t){this.templates=xt(t,this.templates),this.newTemplateAdded=!0}},{key:"deleteTemplate",value:function(t){this.templates=Bt(t,this.templates)}},{key:"trashTemplate",value:function(t){this.templates=St(t,this.templates,"trash")}},{key:"restoreTemplate",value:function(t){this.templates=St(t,this.templates,"publish")}},{key:"emptyTrash",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.emptyingTrash=!0,t.next=3,pt(this.postType);case 3:if(!t.sent){t.next=6;break}this.templates=It(this.templates),this.showTrash=!1;case 6:this.emptyingTrash=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return ea["b"].register("b r e a k d a n c e",(function(){e.hasPermissionToManageFallbacks=!e.hasPermissionToManageFallbacks})),this.isLoadingData=!0,t.t0=y["pipe"],t.next=5,nt(this.postType);case 5:t.t1=t.sent,t.t2=Object(L["fold"])((function(){X["a"].log.message("Couldn't load templates data")}),(function(t){e.templates=t.templates,e.templatesManagementData=t.templatesManagementData,e.isWooCommerceActive=t.isWooCommerceActive,Wt["b"].setDynamicFields(t.templatesManagementData.dynamicFields),Wt["b"].setConditions(t.templatesManagementData.conditions),Wt["b"].setEnvironment(t.environment)})),(0,t.t0)(t.t1,t.t2),this.isLoadingData=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"beforeDestroy",value:function(){ea["b"].unbind("b r e a k d a n c e")}},{key:"getTemplateWithValidSettings",value:function(t){return Object(b["a"])({},t,{settings:Object(y["pipe"])(t.settings,C.decode,Object(L["fold"])((function(){return sa}),(function(t){return t})))})}},{key:"handleTemplateCardModal",value:function(t,e){this.modalData={type:t,data:e}}},{key:"templatesForUi",get:function(){return this.hasPermissionToManageFallbacks?this.templatesByStatus:this.templatesByStatus.filter((function(t){var e;return!(null===(e=t.settings)||void 0===e?void 0:e.fallback)}))}},{key:"filteredTemplatesBySearch",get:function(){var t=this;return this.search?this.templatesForUi.filter((function(e){var a,n;return e.title.toLowerCase().includes(t.search.toLowerCase())||(null===(a=e.settings)||void 0===a||null===(n=a.type)||void 0===n?void 0:n.includes(t.search.toLowerCase()))})):this.templatesForUi}},{key:"templatesByStatus",get:function(){var t=this;return this.templates.filter((function(e){return t.showTrash?"trash"===e.status:"publish"===e.status}))}},{key:"blankTemplateWithValidSettings",get:function(){return{id:-1,title:"",postType:this.postType,editInBreakdanceLink:"",settings:{},status:"publish"}}},{key:"trashLength",get:function(){return this.templates.filter((function(t){return"trash"===t.status})).length}},{key:"templateParentsWithoutTrashed",get:function(){return this.templates.filter((function(t){return"trash"!==t.status})).map((function(t){return{text:t.title,value:t.id}}))}},{key:"templateName",get:function(){return"breakdance_template"===this.postType?"Template":"breakdance_footer"===this.postType?"Footer":"breakdance_header"===this.postType?"Header":"breakdance_popup"===this.postType?"Popup":"Unsupported template"}},{key:"emptyStateData",get:function(){return{itemsByStatus:this.templatesByStatus.length,filteredItemsBySearch:this.filteredTemplatesBySearch.length,templateName:this.templateName,showTrash:this.showTrash}}},{key:"searchInputPlaceholder",get:function(){var t=this.templateName.toLowerCase();return"Search for ".concat(t,"s")}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],aa.prototype,"postType",void 0),Object(d["a"])([Object(m["h"])("newTemplateAdded")],aa.prototype,"onTemplateAdded",null),aa=Object(d["a"])([Object(m["a"])({components:{Icon:G["a"],SearchInput:ze["a"],Loading:qe["a"],Notifications:h["a"],EditTemplateModal:Ue,AddTemplateDropdown:Gt,TemplateRow:_t,EmptyState:ta}})],aa);var na=aa,sa={type:"none",ruleGroups:[]},ra=na,ia=a("1f4f"),la=Object(q["a"])(ra,v,g,!1,null,null,null),oa=la.exports;H()(la,{VBtn:At["a"],VSimpleTable:ia["a"]});var ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoadingData?a("Loading"):t._e(),a("div",{staticClass:"manage-templates"},[a("div",{staticClass:"manage-templates__header"},[a("h1",{staticClass:"manage-templates__title"},[t._v(" "+t._s(t.showTrash?"Deleted Global Blocks":"Global Blocks")+" ")]),t.showTrash?t._e():[a("v-btn",{staticClass:"breakdance-wp-admin-templating-button",attrs:{elevation:"0",outlined:""},on:{click:function(e){t.modalData={type:"add",data:t.blankGlobalBlock}}}},[t._v(" Add Global Block ")])]],2),this.globalBlocksByStatus.length>0||this.filteredBlocksBySearch.length>0||t.trashLength>0||t.showTrash?a("div",{staticClass:"manage-templates__actions"},[a("div",{staticClass:"manage-templates__search"},[a("SearchInput",{attrs:{placeholder:"Search blocks"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t.trashLength||t.showTrash?a("div",{staticClass:"manage-templates__secondary-actions"},[t.showTrash&&this.globalBlocksByStatus.length?a("v-btn",{attrs:{text:"",loading:t.emptyingTrash},on:{click:t.emptyTrash}},[a("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Empty Trash ")],1):t._e(),t.trashLength||t.showTrash?a("v-btn",{staticClass:"mr-2",attrs:{text:""},on:{click:function(e){t.showTrash=!t.showTrash}}},[t.showTrash?[a("Icon",{staticClass:"mr-2",attrs:{icon:"ArrowLeftLongIcon",size:"16"}}),t._v(" Back ")]:[a("Icon",{staticClass:"mr-2",attrs:{icon:"TrashIcon",size:"16"}}),t._v(" Trash ("+t._s(t.trashLength)+") ")]],2):t._e()],1):t._e()]):t._e()]),a("EmptyState",{attrs:{value:t.emptyStateData}}),t.filteredBlocksBySearch.length>0?a("v-simple-table",{staticClass:"manage-templates__table breakdance-table",class:t.newBlockAdded?"added":""},[a("thead",[a("tr",[a("th",[t._v(" Template ")]),a("th",[t._v(" Shortcode ")])])]),a("transition-group",{attrs:{tag:"tbody",name:"fade",mode:"out-in"}},t._l(t.filteredBlocksBySearch,(function(e){return a("BlockRow",{key:e.id,class:t.newBlockAdded?"":"animation-disabled",attrs:{value:e},on:{input:function(e){t.modalData={type:"edit",data:e}},trash:t.trashBlock,delete:t.deleteBlock,restore:t.restoreBlock}})})),1)],1):t._e(),t.modalData?a("EditGlobalBlockModal",{attrs:{value:t.modalData.data,mode:t.modalData.type,globalBlocks:t.globalBlocksByStatus},on:{input:function(e){return t.saveBlock(e)},close:function(e){t.modalData=!1}}}):t._e()],1)},ua=[],pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:!0,"max-width":"600",persistent:t.hasUnsavedChanges,scrollable:!0,transition:!1},on:{input:t.closeDialog}},[a("v-card",{staticClass:"template-settings-modal-content",attrs:{tile:"",flat:"",width:"600"}},[a("v-card-title",{staticClass:"edit-template-modal-titlebar"},[a("h1",[t._v(" "+t._s("add"===t.mode?"Add Global Block":'Editing "'+t.internalValue.label+'"')+" ")])]),a("v-card-text",[a("div",{staticClass:"my-3"},[a("TextInput",{attrs:{value:t.internalValue.label,placeholder:"New Global Block",label:"Title",size:"md"},on:{input:t.setLabel}})],1)]),a("v-card-actions",{staticClass:"edit-template-modal-actions"},[a("v-row",[a("v-col",{staticClass:"text-left"},[t.hasUnsavedChanges?a("v-btn",{attrs:{text:""},on:{click:t.closeDialog}},[t._v(" Cancel ")]):t._e()],1),a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{color:"blue",dark:"",elevation:"0",loading:t.saveInProgress},on:{click:t.saveGlobalBlock}},["edit"===t.mode?[t._v("Save")]:[t._v("Add Global Block")]],2)],1)],1)],1)],1)],1)},da=[],ma=a("f9f0"),ha=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.internalValue=Object(N["a"])(t.value),t.saveInProgress=!1,t}return Object(c["a"])(a,[{key:"mounted",value:function(){var t=this;Object(te["a"])(),this.warnIfUnsavedFunction=Object(Xt["b"])((function(){return t.hasUnsavedChanges}))}},{key:"setLabel",value:function(t){this.internalValue.label=t||""}},{key:"closeDialog",value:function(){Object(Xt["a"])(this.warnIfUnsavedFunction),this.$emit("close")}},{key:"saveGlobalBlock",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.internalValue.label){t.next=3;break}return X["a"].log.message("Title field can't be empty"),t.abrupt("return");case 3:if(!this.globalBlocks.find((function(t){return t.label===e.internalValue.label}))){t.next=6;break}return X["a"].log.message('A global block with the title "'.concat(this.internalValue.label,'" already exists. Please select another title.')),t.abrupt("return");case 6:return t.t0=y["pipe"],t.next=9,Object(ma["d"])(this.internalValue);case 9:t.t1=t.sent,t.t2=Object(L["fold"])((function(){X["a"].log.message("Global block was not saved")}),(function(t){e.$emit("input",t),e.closeDialog()})),(0,t.t0)(t.t1,t.t2);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"hasUnsavedChanges",get:function(){return!Yt.a.isEqual(this.internalValue,this.value)}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],ha.prototype,"value",void 0),Object(d["a"])([Object(m["d"])()],ha.prototype,"mode",void 0),Object(d["a"])([Object(m["d"])()],ha.prototype,"globalBlocks",void 0),ha=Object(d["a"])([Object(m["a"])({components:{NumberInput:Zt["a"],TextInput:Qt["a"],DropdownInput:Kt["a"],ConditionsMatrix:zt["a"]}})],ha);var va=ha,ga=va,ba=Object(q["a"])(ga,pa,da,!1,null,null,null),fa=ba.exports;H()(ba,{VBtn:At["a"],VCard:Mt["a"],VCardActions:Ee["a"],VCardText:Ee["b"],VCardTitle:Ee["c"],VCol:Re["a"],VDialog:Ne["a"],VRow:Fe["a"]});var ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("a",{staticClass:"manage-templates__title-link",attrs:{target:"_top",href:t.value.editInBreakdanceLink}},[t._v(" "+t._s(t.value.label)+" "),a("span",{staticClass:"manage-templates__title-id"},[t._v("#"+t._s(t.value.id))])]),a("div",{staticClass:"manage-templates__row-actions"},[a("a",{staticClass:"manage-templates__btn-action",attrs:{href:t.value.editInBreakdanceLink,target:"_top",title:"Edit in Breakdance"}},[t._v(" Edit in Breakdance ")]),a("button",{staticClass:"manage-templates__btn-action",on:{click:t.openEditBlockModal}},[t._v(" Settings ")]),"trash"===t.mode?a("button",{staticClass:"manage-templates__btn-action",attrs:{title:"Restore"},on:{click:t.restoreBlock}},[t._v(" Restore ")]):t._e(),a("button",{staticClass:"manage-templates__btn-action is-danger",attrs:{title:"publish"===t.mode?"Trash":"Delete permanently"},on:{click:t.deleteBlock}},[t._v(" "+t._s("publish"===t.mode?"Trash":"Delete permanently")+" ")])])]),a("td",[a("input",{staticClass:"block-shortcode",attrs:{type:"text"},domProps:{value:"[breakdance_block blockId="+t.value.id+"]"},on:{click:t.highlightValue}})])])},ka=[],_a=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.deleteInProgress=!1,t.restoreInProgress=!1,t}return Object(c["a"])(a,[{key:"openEditBlockModal",value:function(){this.$emit("input",this.value)}},{key:"deleteBlock",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.deleteInProgress=!0,t.next=3,lt(this.value.label,this.value.id,this.value.status);case 3:e=t.sent,e&&this.$emit("publish"===this.value.status?"trash":"delete",e),this.deleteInProgress=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"restoreBlock",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.restoreInProgress=!0,t.next=3,ct(this.value.label,this.value.id);case 3:e=t.sent,e&&this.$emit("restore",e),this.restoreInProgress=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"highlightValue",value:function(t){var e=function(){return t.target.select()};setTimeout((function(){e()}),100)}},{key:"mode",get:function(){return this.value.status}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],_a.prototype,"value",void 0),_a=Object(d["a"])([Object(m["a"])({components:{Icon:G["a"]}})],_a);var Ta=_a,Oa=Ta,ja=(a("2a1c"),Object(q["a"])(Oa,ya,ka,!1,null,null,null)),wa=ja.exports,Ca=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.modalData=!1,t.globalBlocks=[],t.showTrash=!1,t.newBlockAdded=!1,t.emptyingTrash=!1,t.isLoadingData=!1,t.search="",t}return Object(c["a"])(a,[{key:"onBlockAdded",value:function(){var t=this;setTimeout((function(){return t.newBlockAdded=!1}),1e3)}},{key:"saveBlock",value:function(t){this.globalBlocks=xt(t,this.globalBlocks),this.newBlockAdded=!0}},{key:"deleteBlock",value:function(t){this.globalBlocks=Bt(t,this.globalBlocks)}},{key:"trashBlock",value:function(t){this.globalBlocks=St(t,this.globalBlocks,"trash")}},{key:"restoreBlock",value:function(t){this.globalBlocks=St(t,this.globalBlocks,"publish")}},{key:"emptyTrash",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.emptyingTrash=!0,t.next=3,pt("breakdance_block");case 3:if(!t.sent){t.next=6;break}this.globalBlocks=It(this.globalBlocks),this.showTrash=!1;case 6:this.emptyingTrash=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadingData=!0,t.t0=y["pipe"],t.next=4,rt();case 4:t.t1=t.sent,t.t2=Object(L["fold"])((function(){X["a"].log.message("Couldn't load Global Blocks data")}),(function(t){e.globalBlocks=t})),(0,t.t0)(t.t1,t.t2),this.isLoadingData=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"blankGlobalBlock",get:function(){return{label:"",id:-1,tree:!1,editInBreakdanceLink:"",status:"publish"}}},{key:"emptyStateData",get:function(){return{itemsByStatus:this.globalBlocksByStatus.length,filteredItemsBySearch:this.filteredBlocksBySearch.length,templateName:"Global Block",showTrash:this.showTrash}}},{key:"filteredBlocksBySearch",get:function(){var t=this;return this.globalBlocksByStatus.filter((function(e){return e.label.toLowerCase().includes(t.search.toLowerCase())}))}},{key:"globalBlocksByStatus",get:function(){var t=this;return this.globalBlocks.filter((function(e){return t.showTrash?"trash"===e.status:"publish"===e.status}))}},{key:"trashLength",get:function(){return this.globalBlocks.filter((function(t){return"trash"===t.status})).length}}]),a}(n["a"]);Object(d["a"])([Object(m["h"])("newBlockAdded")],Ca.prototype,"onBlockAdded",null),Ca=Object(d["a"])([Object(m["a"])({components:{Icon:G["a"],SearchInput:ze["a"],Loading:qe["a"],BlockRow:wa,EditGlobalBlockModal:fa,EmptyState:ta}})],Ca);var xa=Ca,Ba=xa,Sa=Object(q["a"])(Ba,ca,ua,!1,null,null,null),Ia=Sa.exports;H()(Sa,{VBtn:At["a"],VSimpleTable:ia["a"]});var Pa=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.addingTemplate=!1,t}return Object(c["a"])(a,[{key:"mounted",value:function(){Object(ea["a"])(document),Wt["b"].setSubscriptionMode(window.Breakdance.subscriptionMode)}},{key:"isBlockPostType",get:function(){return"breakdance_block"===this.postType||"breakdance_acf_block"===this.postType}}]),a}(n["a"]);Object(d["a"])([Object(m["d"])()],Pa.prototype,"postType",void 0),Pa=Object(d["a"])([Object(m["a"])({components:{ManageGlobalBlocks:Ia,ManageTemplates:oa,Notifications:h["a"]}})],Pa);var Va=Pa,Da=Va,La=(a("6571"),a("7496")),Aa=Object(q["a"])(Da,i,l,!1,null,null,null),Ma=Aa.exports;H()(Aa,{VApp:La["a"]});var Ea=a("3003"),Ra=a("c6a3");n["a"].use(Ea["a"]),n["a"].directive("permission",Ra["a"]),n["a"].config.productionTip=!1;var Na=new URLSearchParams(window.parent.location.search).get("page");new n["a"]({store:s["c"],vuetify:r["a"],render:function(t){return t(Ma,{props:{postType:Na}})}}).$mount("#manage-templates-wrapper")},"3c93":function(t,e,a){},"3f94":function(t,e,a){},"5af9":function(t,e,a){"use strict";var n=a("3f94"),s=a.n(n);s.a},6571:function(t,e,a){"use strict";var n=a("9915"),s=a.n(n);s.a},"80e6":function(t,e,a){"use strict";var n=a("0999"),s=a.n(n);s.a},9915:function(t,e,a){},acf2:function(t,e,a){"use strict";var n=a("db85"),s=a.n(n);s.a},db85:function(t,e,a){}});
//# sourceMappingURL=manage-templates.0a1c1011.js.map